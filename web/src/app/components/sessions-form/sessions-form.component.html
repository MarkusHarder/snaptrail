<p-dialog
  [header]="headerText"
  [modal]="true"
  [(visible)]="visible"
  [blockScroll]="true"
  (onHide)="hideDialog()"
>
  <form [formGroup]="sessionForm" (ngSubmit)="onSubmit()">
    <div class="flex flex-col gap-6 w-full mx-auto space-y-5">
      <div class="flex flex-col justify-center gap-6">
        <p-toast />
        <p-fileupload
          #fu
          [customUpload]="true"
          (uploadHandler)="onUpload($event)"
          [multiple]="true"
          accept="image/*"
          mode="basic"
          [auto]="true"
        >
        </p-fileupload>
        @if (uploadedFile) {
          <ul class="flex justify-center">
            <li>{{ filename }} - {{ uploadedFile.size }} bytes</li>
          </ul>
        }
      </div>
      <div class="flex flex-col sm:flex-row sm:items-center gap-6">
        <div>
          <label for="session-name" class="block font-semibold mb-2"
            >Session Name</label
          >
          <input
            type="text"
            pInputText
            id="session-name"
            class="w-full"
            formControlName="sessionName"
          />
          <div style="min-height: 2rem">
            @if (hasError("sessionName", "required")) {
              <p-message severity="error" variant="simple" size="small"
                >Session Name required
              </p-message>
            }
          </div>
        </div>
        <div>
          <label for="subtitle" class="block font-semibold mb-2"
            >Subtitle</label
          >
          <input
            type="text"
            pInputText
            id="subtitle"
            class="w-full"
            formControlName="subtitle"
          />
          <div style="min-height: 2rem">
            @if (hasError("subtitle", "required")) {
              <p-message severity="error" variant="simple" size="small">
                Subtitle required
              </p-message>
            }
          </div>
        </div>
      </div>
      <div class="flex flex-col sm:flex-row sm:items-start gap-6">
        <div class="flex-1">
          <label for="date" class="block font-semibold mb-2">Date</label>
          <p-datepicker
            inputId="date"
            class="w-full"
            formControlName="date"
            dateFormat="yy-mm-dd"
          />
          <div style="min-height: 2rem">
            @if (hasError("date", "required")) {
              <p-message severity="error" variant="simple" size="small"
                >Date required
              </p-message>
            }
          </div>
        </div>
        <div class="flex-1">
          <label for="published" class="block font-semibold mb-2"
            >Published/Private</label
          >
          <p-togglebutton
            id="published"
            formControlName="published"
            onLabel="Published"
            offLabel="Private"
          />
        </div>
      </div>
      <div class="flex-auto">
        <label for="description" class="block font-semibold mb-2"
          >Description</label
        >
        <textarea
          pTextarea
          id="description"
          class="w-full"
          rows="4"
          formControlName="description"
        ></textarea>

        <div style="min-height: 2rem">
          @if (hasError("description", "required")) {
            <p-message severity="error" variant="simple" size="small">
              Description required
            </p-message>
          }
        </div>
      </div>
      <p-button type="submit" [disabled]="!sessionForm.valid">Submit</p-button>
    </div>
  </form>
</p-dialog>
